# Traffic Density Estimation Using OpenCV

## Part 2 : Plotting Queue and Dynamic Density


### Installation and Building (for Ubuntu 20.04 )

``` bash
$ sudo apt install libboost-program-options-dev
$ sudo apt install python3.8 python3.8-dev python3-matplotlib python3-numpy
$ make
```  
*** For Older versions of Ubuntu, replace with appropriate versions of python3 in installation and in makefile

### Executing 
``` bash
$ ./main.out -f trafficvideo.mp4 
```  
More execution options are given below.
<br/>
<br/>

### Clean Workspace
``` bash
$ make clean
```

<br/>

### Allowed options:
>| Flag      | Usage           |
>| ------------- |:-------------:|
>| -h, --help                     | produce help message |
>| -f, --file < filepath >    | video filepath      |
>| -r, --framerate < framerate >    | frames to skip processing, *Default : 5*      |
>| -s, --save < filepath >    | path to image of saved graph,  *Default : output.png*   |
>| -c, --choose                   | enter custom area to crop     | 
<br/>


### User Interface : 

- Run the executable generated by g++ as with required options as above.
    - If choose flag is given then-
      - A window opens containing the image of road in grayscale. 
      - Select 4 points in succession on the image using the mouse which will serve as the area of road to focus on, for density calculation.
    -  In the file flag, if the video is not in the same directory then provide the path of the video.
- ...
<!-- - A window opens containing the image in grayscale.
  - Select 4 points in succession on the image using the mouse which will serve as the source coordinates for the transform.
- A new window opens with the transformed image, with the outline of the rectangle to be cropped. 
  - The transformed image is obtained by applying a homographic transform of the source points onto the destination points and then selecting the smallest rectangle that contains a part of the actual image.
  - Press Enter to conform the selection, and Esc. to cancel and exit.
- On conformation, another window opens containing the cropped image.  -->
- Finally the plots of Queue and Dynamic density will be saved in the file given by user or by default in "output.png".


### Libraries Used :
- **OpenCV** - For image and video operations and plotting graph in realtime
- **Boost** - For argument parser
- **matplotlib** - For plotting final graph 